<div>
  <div *ngIf="isLoading; else loaded" class="loading">Loading...</div>
  <ng-template #loaded>
    <!-- MODAL -->
    <ng-template #modalTemplate>
      <div class="modal-body">
        <ng-container *ngTemplateOutlet="formItemRef"></ng-container>
      </div>
      <div class="modal-footer">
        <button class="btn btn-info btn-sm" (click)="modalRef.hide()">
          Close
        </button>
      </div>
    </ng-template>

    <!-- if place *ngIf here - it will recreate readonly form on each item change -->
    <!-- FORM -->
    <div
      class="container-fluid"
      [hidden]="showType !== 'FORM' || !selectedItem"
    >
      <div class="row">
        <span class="col">
          <button class="btn btn-secondary" (click)="showGrid()">
            <i class="fas fa-th"></i>
            Back to Grid
          </button>
        </span>
      </div>
      <ng-container *ngTemplateOutlet="formItemRef"></ng-container>
    </div>

    <ng-template #formItemRef>
      <sr-readonly-form
        *ngIf="selectedItem"
        [item]="selectedItem"
      ></sr-readonly-form>
    </ng-template>

    <!-- GRID -->
    <sr-info-grid
      *ngIf="items"
      [items]="items"
      [hidden]="showType === 'FORM'"
      (rowClicked)="gridRowClicked($event)"
    ></sr-info-grid>
  </ng-template>
</div>
